{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Revythis/olympiacos-next/pages/teams.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Head from 'next/head';\r\nimport '../styles/teams.css';  // Assuming you have this CSS file for styling\r\n\r\nconst TeamsTable = () => {\r\n  const [teams, setTeams] = useState([]);\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchTeams();\r\n    checkLoginStatus();\r\n  }, []);\r\n\r\n  const fetchTeams = () => {\r\n    fetch('http://localhost:3000/teams')  // Replace with your server endpoint if different\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        setTeams(data);\r\n      })\r\n      .catch(error => {\r\n        console.error('Error fetching teams:', error);\r\n      });\r\n  };\r\n\r\n  const deleteTeam = async (teamId) => {\r\n    if (!teamId) {\r\n      alert('Invalid team ID');\r\n      return;\r\n    }\r\n\r\n    const confirmation = confirm(\"Are you sure you want to delete this team? This action cannot be undone.\");\r\n\r\n    if (confirmation) {\r\n      try {\r\n        const response = await fetch(`http://localhost:3000/teams/${teamId}`, {\r\n          method: 'DELETE',\r\n        });\r\n\r\n        if (response.ok) {\r\n          alert('Team deleted successfully!');\r\n          fetchTeams(); // Refresh the teams list\r\n        } else {\r\n          const errorData = await response.json();\r\n          alert(errorData.error);\r\n        }\r\n      } catch (err) {\r\n        alert('Failed to delete team');\r\n        console.error(err);\r\n      }\r\n    }\r\n  };\r\n\r\n  const checkLoginStatus = () => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      console.error('No token found');\r\n      return;\r\n    }\r\n\r\n    fetch('http://localhost:3000/check-login', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    })\r\n      .then(response => {\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then(data => {\r\n        if (data.loggedIn) {\r\n          setCurrentUser(data.username);\r\n        } else {\r\n          localStorage.removeItem('token');\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error('Error checking login status:', error);\r\n        localStorage.removeItem('token');\r\n      });\r\n  };\r\n\r\n  const logout = () => {\r\n    fetch('http://localhost:3000/logout', {  // Ensure this matches your logout endpoint\r\n      method: 'POST',\r\n    })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        if (data.message === 'Logout successful') {\r\n          localStorage.removeItem('token');\r\n          setCurrentUser(null);\r\n          alert('Logged out successfully.');\r\n          window.location.reload();  // Reload the page to reflect the logged-out status\r\n        } else {\r\n          alert('Error during logout.');\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error('Error during logout:', error);\r\n        alert('Error during logout: ' + error.message);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Head>\r\n        <meta charSet=\"UTF-8\" />\r\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\r\n        <title>Teams Table</title>\r\n        <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css\" rel=\"stylesheet\" />\r\n      </Head>\r\n      <div className=\"bg-light\">\r\n        <nav className=\"navbar navbar-expand-lg navbar-light fixed-top mask-custom shadow-0\">\r\n          <div className=\"container\">\r\n            <a className=\"navbar-brand\" href=\"index.html\">\r\n              <img src=\"/oly.png\" alt=\"Olympiacos Logo\" style={{ height: '60px', width: '60px', objectFit: 'contain', marginRight: '10px' }} />\r\n              <span style={{ color: '#a30909' }}>Olympiacos </span><span style={{ color: '#fff' }}>project</span>\r\n            </a>\r\n            <button className=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarContent\" aria-controls=\"navbarContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n              <span className=\"navbar-toggler-icon\"></span>\r\n            </button>\r\n            <div className=\"collapse navbar-collapse\" id=\"navbarContent\">\r\n              <ul className=\"navbar-nav ms-auto\">\r\n                <li className=\"nav-item\">\r\n                  <a className=\"nav-link\" href=\"index.html\" style={{ color: 'white' }}>Home</a>\r\n                </li>\r\n                <li className=\"nav-item dropdown me-3\" style={{ display: currentUser ? 'none' : 'block' }}>\r\n                  <a className=\"nav-link\" href=\"#\" id=\"show-login-modal\" data-bs-toggle=\"modal\" data-bs-target=\"#login-modal\">Login</a>\r\n                </li>\r\n                <li className=\"nav-item dropdown me-3\" style={{ display: currentUser ? 'inline-block' : 'none' }}>\r\n                  <a className=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n                    <span id=\"username\">{` ${currentUser}`}</span>\r\n                  </a>\r\n                  <ul className=\"dropdown-menu\" aria-labelledby=\"username-dropdown\">\r\n                    <li><a className=\"dropdown-item\" href=\"#\" onClick={logout}>Log Out</a></li>\r\n                  </ul>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </nav>\r\n\r\n        <div className=\"container mt-5\">\r\n          <table className=\"table table-striped\">\r\n            <thead>\r\n              <tr>\r\n                <th>Actions</th>\r\n                <th>Team Name</th>\r\n                <th>Logo</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {teams.map(team => (\r\n                <tr key={team.team_id}>\r\n                  <td>\r\n                    <button className=\"btn btn-danger\" onClick={() => deleteTeam(team.team_id)}>Delete</button>\r\n                  </td>\r\n                  <td>{team.team_name}</td>\r\n                  <td><img src={team.logo_url} className=\"team-logo\" alt={`${team.team_name} logo`} /></td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default TeamsTable;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 504, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}